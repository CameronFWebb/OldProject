import React, { useEffect, useMemo, useState } from 'react';
import './App.css';

// components
import Table from './components/tableComponent/table';
import Popup from './components/popupComponent/popup';


export default function OldApp() {
  const [data, setData] = useState([]);
  const [q, setQ] = useState("");
  const [direction, setDirection] = useState("asc");
  const [popup, setPopup] = useState(false);
  const [popupHTML, setPopupHTML] = useState([]);
  
  useEffect(() => {
    //fetch('http://localhost:51196/sql/get/cores') //calls to local sql via ASP.NET API
    //fetch('http://localhost:51196/sql/get/parts') //removed
    //fetch('http://localhost:51196/sql/get/jobs')  //was in multiple parts for testing 
    //  .then((Response) => Response.json())
    //  .then((json) => setData(json));

    //hardcoded API response to remove dependency on local sql database/api
    setData([{"ID":1,"Job_Number":"171253 - 17254","Part_Number":"382-001","Description":"HT TRAILER","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":2,"Job_Number":"171253 - 17254","Part_Number":"382-002","Description":"GOOSENECK ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":3,"Job_Number":"171253 - 17254","Part_Number":"309-2006","Description":"TYRE MOUNT","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":4,"Job_Number":"171253 - 17254","Part_Number":"382-010","Description":"ROPE RAIL","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":5,"Job_Number":"171253 - 17254","Part_Number":"CM021-037","Description":"SCISSOR ARM 2040 ASSY - BOTTOM","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":6,"Job_Number":"171253 - 17254","Part_Number":"CM021-038","Description":"SCISSOR ARM 2040 ASSY - TOP","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":7,"Job_Number":"171253 - 17254","Part_Number":"CM021-039","Description":"FRONT RAM MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":8,"Job_Number":"171253 - 17254","Part_Number":"CM021-A004","Description":"HOUSE-GOOSENECK LOCK PLATE ASSY","QTY":14,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":9,"Job_Number":"171253 - 17254","Part_Number":"CM021-A005","Description":"TOP X-MEMBER ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":10,"Job_Number":"171253 - 17254","Part_Number":"CM021-A006","Description":"BOTTOM X-MEMBER ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":11,"Job_Number":"171253 - 17254","Part_Number":"CM029-A16","Description":"OSC SKID PLATE SIDE SHIFT KING PIN ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":12,"Job_Number":"171253 - 17254","Part_Number":"CM029-A17","Description":"TOP SKID PLATE FOR SIDE SHIFT","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":13,"Job_Number":"171253 - 17254","Part_Number":"CM029-A12","Description":"WOBBLER PIVOT SHAFT","QTY":1,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":14,"Job_Number":"171253 - 17254","Part_Number":"CM029-A18","Description":"BOTTOM SKID PLATE FOR SIDE SHIFT","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":15,"Job_Number":"171253 - 17254","Part_Number":"CM029-A19","Description":"KING PIN SLIDING BLOCK","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":16,"Job_Number":"171253 - 17254","Part_Number":"HT00038A-RH","Description":"RH GOOSNECK LEG MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":17,"Job_Number":"171253 - 17254","Part_Number":"HT00038A","Description":"LH GOOSENECK LEG MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":18,"Job_Number":"171253 - 17254","Part_Number":"HT00039A","Description":"OUTER LEG C/W RAM PLATE ","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":19,"Job_Number":"171253 - 17254","Part_Number":"HT00059","Description":"SIDE SHIFT OUTER LEG ASSY","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":20,"Job_Number":"171253 - 17254","Part_Number":"HT00059","Description":"SIDE SHIFT OUTER LEG ASSY","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":21,"Job_Number":"171253 - 17254","Part_Number":"HT00063","Description":"SIDE SHIFT DROP LEG ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":22,"Job_Number":"171253 - 17254","Part_Number":"HT00225P","Description":"GOOSENECK TIE ROD","QTY":1,"AS":1,"PC":0,"MA":1,"WD":1,"SP":1,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":23,"Job_Number":"171253 - 17254","Part_Number":"TYRE 235,17.5x6.75, 10 STUD, ALLOY","Description":"TYRE 235,17.5x6.75, 10 STUD, ALLOY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":24,"Job_Number":"171253 - 17254","Part_Number":"382-003","Description":"CHASSY ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":25,"Job_Number":"171253 - 17254","Part_Number":"382-005","Description":"CHASSIS BEAM ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":26,"Job_Number":"171253 - 17254","Part_Number":"382-006","Description":"ROPE RAIL ASSY","QTY":6,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":27,"Job_Number":"171253 - 17254","Part_Number":"382-007","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":28,"Job_Number":"171253 - 17254","Part_Number":"382-008","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":29,"Job_Number":"171253 - 17254","Part_Number":"382-009","Description":"BEACON SUPPORT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":30,"Job_Number":"171253 - 17254","Part_Number":"382-011","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":31,"Job_Number":"171253 - 17254","Part_Number":"382-014","Description":"MAT HOLDER ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":32,"Job_Number":"171253 - 17254","Part_Number":"382-015","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":33,"Job_Number":"171253 - 17254","Part_Number":"382-018","Description":"TRAILER CLIP ON MODULE","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":34,"Job_Number":"171253 - 17254","Part_Number":"374-011","Description":"INSIDE PIN","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":35,"Job_Number":"171253 - 17254","Part_Number":"382-019","Description":"OVERSIZE SIGN HOLDER ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":36,"Job_Number":"171253 - 17254","Part_Number":"382-021","Description":"STEERING SUSPN MODULE 2750W","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":37,"Job_Number":"171253 - 17254","Part_Number":"382-020","Description":"SUSPN MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":38,"Job_Number":"171253 - 17254","Part_Number":"CM018-A7","Description":"DOUBLE CONTROL VALVE","QTY":2,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":39,"Job_Number":"171253 - 17254","Part_Number":"CM013-A058","Description":"STEERING LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":40,"Job_Number":"171253 - 17254","Part_Number":"CM013-A058-RH","Description":"STEERING LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":41,"Job_Number":"171253 - 17254","Part_Number":"CM013 A010","Description":"STEERING TIE ROD ASSY","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":42,"Job_Number":"171253 - 17254","Part_Number":"CM013 A011","Description":"TIE ROD PIN","QTY":4,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":43,"Job_Number":"171253 - 17254","Part_Number":"CM013 A012","Description":"TIE ROD CHASSIS MOUNT","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":44,"Job_Number":"171253 - 17254","Part_Number":"CM013-A059","Description":"STEER AXLE ASSEMBLY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":45,"Job_Number":"171253 - 17254","Part_Number":"CM013 A019","Description":"LH STEERING LOCK ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":46,"Job_Number":"171253 - 17254","Part_Number":"CM013-A26","Description":"RH BRAKE POT MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":47,"Job_Number":"171253 - 17254","Part_Number":"HT00010A","Description":"LH & RH RETAINING PLATE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":48,"Job_Number":"171253 - 17254","Part_Number":"235 X 75 X R17.5 10 STUD 17.5X6.75 ALLOY","Description":"WHEEL","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":49,"Job_Number":"171253 - 17254","Part_Number":"CM013-A059 RH","Description":"BPW RH STEERING AXLE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":50,"Job_Number":"171253 - 17254","Part_Number":"CM013 A020","Description":"RH STEERING LOCK ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":51,"Job_Number":"171253 - 17254","Part_Number":"RHHT00010A","Description":"2.5M HOUSE-RH RETAINING PLATE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":52,"Job_Number":"171253 - 17254","Part_Number":"CM013-A26","Description":"RH BRAKE POT MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":53,"Job_Number":"171253 - 17254","Part_Number":"235 X 75 X R17.5 10 STUD 17.5X6.75 ALLOY","Description":"WHEEL","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":54,"Job_Number":"171253 - 17254","Part_Number":"382-022","Description":"FIXED LEG ASSEMBLY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":55,"Job_Number":"171253 - 17254","Part_Number":"382-020","Description":"SUSPN MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":56,"Job_Number":"171253 - 17254","Part_Number":"CM018-A7","Description":"DOUBLE CONTROL VALVE","QTY":2,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":57,"Job_Number":"171253 - 17254","Part_Number":"CM013-A060","Description":"FIXED LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":58,"Job_Number":"171253 - 17254","Part_Number":"CM013-A060-RH","Description":"FIXED LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":59,"Job_Number":"171253 - 17254","Part_Number":"235 X 75 X R17.5 10 STUD 17.5X6.75 ALLOY","Description":"WHEEL","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":60,"Job_Number":"171253 - 17254","Part_Number":"CM031-A7","Description":"AIR LOCK","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":61,"Job_Number":"171253 - 17254","Part_Number":"CM081-A7","Description":"YARD RELEASE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":62,"Job_Number":"171253 - 17254","Part_Number":"HT00059","Description":"SIDE SHIFT OUTER LEG ASSY","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":63,"Job_Number":"171253 - 17254","Part_Number":"HT00063","Description":"SIDE SHIFT DROP LEG ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":64,"Job_Number":"171253 - 17254","Part_Number":"382-025","Description":"HT CLIP-ON","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":65,"Job_Number":"171253 - 17254","Part_Number":"382-008","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":66,"Job_Number":"171253 - 17254","Part_Number":"382-021","Description":"STEERING SUSPN MODULE 2750W","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":67,"Job_Number":"171253 - 17254","Part_Number":"382-020","Description":"SUSPN MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":68,"Job_Number":"171253 - 17254","Part_Number":"CM018-A7","Description":"DOUBLE CONTROL VALVE","QTY":2,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":69,"Job_Number":"171253 - 17254","Part_Number":"CM013-A058","Description":"STEERING LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":70,"Job_Number":"171253 - 17254","Part_Number":"CM013-A058-RH","Description":"STEERING LEG ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":71,"Job_Number":"171253 - 17254","Part_Number":"CM013 A010","Description":"STEERING TIE ROD ASSY","QTY":2,"AS":1,"PC":0,"MA":1,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":72,"Job_Number":"171253 - 17254","Part_Number":"CM013-A059","Description":"STEER AXLE ASSEMBLY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":73,"Job_Number":"171253 - 17254","Part_Number":"CM013 A019","Description":"LH STEERING LOCK ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":74,"Job_Number":"171253 - 17254","Part_Number":"CM013-A26","Description":"RH BRAKE POT MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":75,"Job_Number":"171253 - 17254","Part_Number":"HT00010A","Description":"LH & RH RETAINING PLATE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":76,"Job_Number":"171253 - 17254","Part_Number":"235 X 75 X R17.5 10 STUD 17.5X6.75 ALLOY","Description":"WHEEL","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":77,"Job_Number":"171253 - 17254","Part_Number":"CM013-A059 RH","Description":"BPW RH STEERING AXLE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":78,"Job_Number":"171253 - 17254","Part_Number":"CM013 A020","Description":"RH STEERING LOCK ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":79,"Job_Number":"171253 - 17254","Part_Number":"RHHT00010A","Description":"2.5M HOUSE-RH RETAINING PLATE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":80,"Job_Number":"171253 - 17254","Part_Number":"CM013-A26","Description":"RH BRAKE POT MOUNT ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":81,"Job_Number":"171253 - 17254","Part_Number":"235 X 75 X R17.5 10 STUD 17.5X6.75 ALLOY","Description":"WHEEL","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":82,"Job_Number":"171253 - 17254","Part_Number":"382-026","Description":"ROPE RAIL ASSY","QTY":2,"AS":1,"PC":0,"MA":0,"WD":1,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""},{"ID":83,"Job_Number":"171253 - 17254","Part_Number":"CM081-A4","Description":"YARD RELEASE ASSY","QTY":1,"AS":1,"PC":0,"MA":0,"WD":0,"SP":0,"Date":"1900-01-01T00:00:00","ETA":"1900-01-01T00:00:00","Updated":0,"Information":""}]);
  }, []);

  const customToString = (val) => {
    if (val == null)
      return "";
    else
      return val.toString();
  }

  const search = (rows) => {
    const columns = rows[0] && Object.keys(rows[0]);
    return rows.filter((row) =>
      columns.some(
        (column) => customToString(row[column]).toLowerCase().indexOf(q.toLowerCase()) > -1
      )
    );
  }

  const sortBy = (header) => {
    let dir = 'asc';
    if (direction && direction.header === header && direction.dir === 'asc') {
      dir = 'des';
    }
    setDirection({ header, dir });
  }

  useMemo(() => {
    const arr = [].concat(data)
      .sort((a, b) => {
        if (a[direction.header] < b[direction.header]) {
          return direction.dir === 'asc' ? -1 : 1;
        }
        if (a[direction.header] > b[direction.header]) {
          return direction.dir === 'asc' ? 1 : -1;
        }
        return 0;
      });
    setData(arr)
  }, [direction]);

  const handlePopupVis = () => {
    setPopup(false);
  }

  const handlePopupHTML = (data) => {
    setPopup(true);
    //setPopupHTML(popup ? <Popup data={data} handlePopupVis={handlePopupVis}/> : null);
    setPopupHTML(<Popup data={data} handlePopupVis={handlePopupVis} />);
  }

  return (
    <div>
      {popup ? <div className="popup" > {popupHTML} </div> : null}
      <div className="inputdiv">
        <input type="text" value={q} onChange={(e) => setQ(e.target.value)} />
      </div>
      <div className="tablediv">
        <Table data={search(data)} sortBy={sortBy} editPopup={handlePopupHTML} />
      </div>
    </div>
  )
}